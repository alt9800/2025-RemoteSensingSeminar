<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>MapLibre GL JS - èƒŒæ™¯åœ°å›³ã‚¬ã‚¤ãƒ‰</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet">
    <style>
        body { 
            margin: 0; 
            padding: 0;
            font-family: Arial, sans-serif;
        }
        
        .container {
            display: flex;
            height: 100vh;
        }
        
        .map-section {
            flex: 1;
            position: relative;
        }
        
        #map { 
            width: 100%; 
            height: 100%;
        }
        
        .controls-panel {
            width: 420px;
            background: #f8f9fa;
            border-left: 1px solid #ddd;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            padding: 20px;
            background: #007cba;
            color: white;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 18px;
        }
        
        .carousel-container {
            flex: 1;
            overflow: hidden;
            position: relative;
        }
        
        .carousel {
            display: flex;
            transition: transform 0.3s ease;
            height: 100%;
        }
        
        .carousel-slide {
            min-width: 100%;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
        }
        
        .carousel-nav {
            display: flex;
            justify-content: center;
            padding: 15px;
            background: #e9ecef;
            gap: 10px;
        }
        
        .nav-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ccc;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .nav-dot.active {
            background: #007cba;
        }
        
        .basemap-section h2 {
            color: #007cba;
            margin-top: 0;
            font-size: 18px;
            border-bottom: 2px solid #007cba;
            padding-bottom: 8px;
        }
        
        .basemap-item {
            margin-bottom: 15px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .basemap-item h3 {
            margin: 0 0 8px 0;
            color: #333;
            font-size: 14px;
        }
        
        .basemap-item p {
            margin: 0 0 10px 0;
            color: #666;
            font-size: 13px;
            line-height: 1.4;
        }
        
        button {
            padding: 6px 12px;
            background: #007cba;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin: 2px;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #005a87;
        }
        
        button.active {
            background: #28a745;
        }
        
        .code-example {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            margin: 8px 0;
            border-left: 3px solid #007cba;
            white-space: pre-line;
            line-height: 1.3;
        }
        
        .nav-arrows {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 124, 186, 0.8);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .nav-prev {
            left: 10px;
        }
        
        .nav-next {
            right: 10px;
        }
        
        .nav-arrows:hover {
            background: rgba(0, 90, 135, 0.9);
            transform: translateY(-50%) scale(1.1);
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 12px;
        }
        
        .comparison-table th,
        .comparison-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        
        .comparison-table th {
            background: #f8f9fa;
            font-weight: bold;
        }
        
        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 10px 0;
        }
        
        .pros, .cons {
            padding: 10px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .pros {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }
        
        .cons {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }
        
        .pros h4, .cons h4 {
            margin: 0 0 8px 0;
            font-size: 13px;
        }
        
        .info-box {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            padding: 12px;
            border-radius: 4px;
            margin: 10px 0;
            font-size: 13px;
        }
        
        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 12px;
            border-radius: 4px;
            margin: 10px 0;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="map-section">
            <div id="map"></div>
        </div>
        
        <div class="controls-panel">
            <div class="header">
                <h1>èƒŒæ™¯åœ°å›³ã®ç¨®é¡</h1>
            </div>
            
            <div class="carousel-container">
                <div class="carousel" id="carousel">
                    <!-- ã‚¹ãƒ©ã‚¤ãƒ‰1: OpenStreetMap ãƒ™ãƒ¼ã‚¹ -->
                    <div class="carousel-slide">
                        <div class="basemap-section">
                            <h2>OpenStreetMapç³»</h2>
                            
                            <div class="basemap-item">
                                <h3>OSM Japan Style</h3>
                                <p>æ—¥æœ¬èªè¡¨ç¤ºã«æœ€é©åŒ–ã•ã‚ŒãŸOpenStreetMapã‚¹ã‚¿ã‚¤ãƒ«</p>
                                <button onclick="changeBasemap('osm-japan')" id="btn-osm-japan" class="active">é©ç”¨ä¸­</button>
                                <div class="code-example">map.setStyle('https://tile.openstreetmap.jp/styles/osm-bright-ja/style.json');</div>
                            </div>
                            
                            <div class="basemap-item">
                                <h3>OpenStreetMap Standard</h3>
                                <p>æ¨™æº–çš„ãªOpenStreetMapã‚¿ã‚¤ãƒ«</p>
                                <button onclick="changeBasemap('osm-standard')" id="btn-osm-standard">åˆ‡ã‚Šæ›¿ãˆ</button>
                                <div class="code-example">// Raster Tileã¨ã—ã¦ä½¿ç”¨
map.setStyle({
  version: 8,
  sources: {
    osm: {
      type: 'raster',
      tiles: ['https://tile.openstreetmap.org/{z}/{x}/{y}.png'],
      tileSize: 256
    }
  },
  layers: [{
    id: 'osm',
    type: 'raster',
    source: 'osm'
  }]
});</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ã‚¹ãƒ©ã‚¤ãƒ‰2: èˆªç©ºå†™çœŸãƒ»è¡›æ˜Ÿå†™çœŸ -->
                    <div class="carousel-slide">
                        <div class="basemap-section">
                            <h2>èˆªç©ºå†™çœŸãƒ»è¡›æ˜Ÿå†™çœŸ</h2>
                            
                            <div class="basemap-item">
                                <h3>ESRI World Imagery</h3>
                                <p>ä¸–ç•Œçš„ã«é«˜å“è³ªãªè¡›æ˜Ÿãƒ»èˆªç©ºå†™çœŸ</p>
                                <button onclick="changeBasemap('esri-satellite')" id="btn-esri-satellite">åˆ‡ã‚Šæ›¿ãˆ</button>
                                <div class="code-example">map.setStyle({
  version: 8,
  sources: {
    satellite: {
      type: 'raster',
      tiles: [
        'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}'
      ],
      tileSize: 256
    }
  },
  layers: [{
    id: 'satellite',
    type: 'raster',
    source: 'satellite'
  }]
});</div>
                            </div>
                            
                            <div class="basemap-item">
                                <h3>Sentinel-2 Cloudless (2021)</h3>
                                <p>EOXãŒæä¾›ã™ã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ•ãƒªãƒ¼ãªSentinel-2è¡›æ˜Ÿç”»åƒ</p>
                                <button onclick="changeBasemap('sentinel')" id="btn-sentinel">åˆ‡ã‚Šæ›¿ãˆ</button>
                                <div class="code-example">map.setStyle({
  version: 8,
  sources: {
    sentinel: {
      type: 'raster',
      tiles: [
        'https://tiles.maps.eox.at/wmts/1.0.0/s2cloudless-2021_3857/default/g/{z}/{y}/{x}.jpg'
      ],
      tileSize: 256,
      attribution: 'Â© EOX IT Services GmbH | Contains modified Copernicus Sentinel data 2021'
    }
  },
  layers: [{
    id: 'sentinel-layer',
    type: 'raster',
    source: 'sentinel'
  }]
});</div>
                            </div>
                            
                            <div class="info-box">
                                <strong>ğŸ“¡ è¡›æ˜Ÿå†™çœŸã®ç‰¹å¾´</strong><br>
                                â€¢ Sentinel-2 Cloudless: 10mè§£åƒåº¦ã€é›²ãªã—åˆæˆç”»åƒã€ç„¡æ–™<br>
                                â€¢ ESRI World Imagery: å•†ç”¨é«˜å“è³ªç”»åƒ<br>
                                â€¢ åˆ©ç”¨ç”¨é€”: åœ°å½¢æŠŠæ¡ã€å»ºç‰©ç¢ºèªã€ç½å®³èª¿æŸ»ã€è¾²æ¥­ç›£è¦–
                            </div>
                        </div>
                    </div>
                    
                    <!-- ã‚¹ãƒ©ã‚¤ãƒ‰3: åœ°ç†é™¢åœ°å›³ -->
                    <div class="carousel-slide">
                        <div class="basemap-section">
                            <h2>åœ°ç†é™¢åœ°å›³</h2>
                            
                            <div class="basemap-item">
                                <h3>åœ°ç†é™¢åœ°å›³ æ¨™æº–åœ°å›³</h3>
                                <p>å›½åœŸåœ°ç†é™¢ãŒæä¾›ã™ã‚‹å…¬å¼åœ°å›³</p>
                                <button onclick="changeBasemap('gsi-standard')" id="btn-gsi-standard">åˆ‡ã‚Šæ›¿ãˆ</button>
                                <div class="code-example">map.setStyle({
  version: 8,
  sources: {
    gsi: {
      type: 'raster',
      tiles: [
        'https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png'
      ],
      tileSize: 256,
      attribution: '&copy; å›½åœŸåœ°ç†é™¢'
    }
  },
  layers: [{
    id: 'gsi',
    type: 'raster',
    source: 'gsi'
  }]
});</div>
                            </div>
                            
                            <div class="basemap-item">
                                <h3>åœ°ç†é™¢åœ°å›³ èˆªç©ºå†™çœŸ</h3>
                                <p>å›½åœŸåœ°ç†é™¢ã®èˆªç©ºå†™çœŸ</p>
                                <button onclick="changeBasemap('gsi-photo')" id="btn-gsi-photo">åˆ‡ã‚Šæ›¿ãˆ</button>
                                <div class="code-example">map.setStyle({
  version: 8,
  sources: {
    gsi_photo: {
      type: 'raster',
      tiles: [
        'https://cyberjapandata.gsi.go.jp/xyz/seamlessphoto/{z}/{x}/{y}.jpg'
      ],
      tileSize: 256,
      attribution: '&copy; å›½åœŸåœ°ç†é™¢'
    }
  },
  layers: [{
    id: 'gsi_photo',
    type: 'raster',
    source: 'gsi_photo'
  }]
});</div>
                            </div>
                            
                            <div class="basemap-item">
                                <h3>åœ°ç†é™¢åœ°å›³ãƒ™ã‚¯ã‚¿ãƒ¼</h3>
                                <p>å›½åœŸåœ°ç†é™¢ã®ãƒ™ã‚¯ãƒˆãƒ«ã‚¿ã‚¤ãƒ«ï¼ˆå‹•ä½œç¢ºèªæ¸ˆã¿ï¼‰</p>
                                <button onclick="changeBasemap('gsi-vector')" id="btn-gsi-vector">åˆ‡ã‚Šæ›¿ãˆ</button>
                                <div class="code-example">map.setStyle('https://gsi-cyberjapan.github.io/gsivectortile-mapbox-gl-js/std.json');</div>
                            </div>
                            
                            <div class="basemap-item">
                                <h3>åœ°ç†é™¢åœ°å›³ è‰²åˆ¥æ¨™é«˜å›³</h3>
                                <p>æ¨™é«˜ã‚’è‰²åˆ†ã‘ã—ãŸåœ°å½¢å›³</p>
                                <button onclick="changeBasemap('gsi-relief')" id="btn-gsi-relief">åˆ‡ã‚Šæ›¿ãˆ</button>
                                <div class="code-example">map.setStyle({
  version: 8,
  sources: {
    relief: {
      type: 'raster',
      tiles: [
        'https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png'
      ],
      tileSize: 256,
      attribution: '&copy; å›½åœŸåœ°ç†é™¢'
    }
  },
  layers: [{
    id: 'relief',
    type: 'raster',
    source: 'relief'
  }]
});</div>
                            </div>
                            
                            <div class="info-box">
                                <strong>ğŸ›ï¸ åœ°ç†é™¢åœ°å›³ã®ç‰¹å¾´</strong><br>
                                â€¢ ãƒ™ã‚¯ãƒˆãƒ«ã‚¿ã‚¤ãƒ«: é«˜é€Ÿã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½<br>
                                â€¢ ãƒ©ã‚¹ã‚¿ãƒ¼ã‚¿ã‚¤ãƒ«: æ—¢æˆã‚¹ã‚¿ã‚¤ãƒ«ã€è»½é‡<br>
                                â€¢ å›½åœŸåœ°ç†é™¢ãŒå…¬å¼æä¾›ã€æ¸¬é‡æ³•ã«åŸºã¥ãæ­£ç¢ºæ€§<br>
                                â€¢ æ—¥æœ¬å›½å†…ã«ç‰¹åŒ–ã€ç„¡æ–™ã§åˆ©ç”¨å¯èƒ½
                            </div>
                        </div>
                    </div>
                    
                    <!-- ã‚¹ãƒ©ã‚¤ãƒ‰4: æ¯”è¼ƒè¡¨ -->
                    <div class="carousel-slide">
                        <div class="basemap-section">
                            <h2>åœ°å›³ã‚¿ã‚¤ãƒ—æ¯”è¼ƒ</h2>
                            
                            <table class="comparison-table">
                                <thead>
                                    <tr>
                                        <th>ç¨®é¡</th>
                                        <th>è§£åƒåº¦</th>
                                        <th>æ›´æ–°é »åº¦</th>
                                        <th>è²»ç”¨</th>
                                        <th>ç”¨é€”</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>OSM</strong></td>
                                        <td>ãƒ™ã‚¯ã‚¿ãƒ¼</td>
                                        <td>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ </td>
                                        <td>ç„¡æ–™</td>
                                        <td>ä¸€èˆ¬çš„ãªWebåœ°å›³</td>
                                    </tr>
                                    <tr>
                                        <td><strong>èˆªç©ºå†™çœŸ</strong></td>
                                        <td>30cm-1m</td>
                                        <td>æ•°ãƒ¶æœˆ-æ•°å¹´</td>
                                        <td>æœ‰æ–™ãŒå¤šã„</td>
                                        <td>ç¾åœ°ç¢ºèªã€æ¸¬é‡</td>
                                    </tr>
                                    <tr>
                                        <td><strong>è¡›æ˜Ÿå†™çœŸ</strong></td>
                                        <td>1m-30m</td>
                                        <td>æ•°æ—¥-æ•°ãƒ¶æœˆ</td>
                                        <td>æœ‰æ–™ãŒå¤šã„</td>
                                        <td>åºƒåŸŸèª¿æŸ»ã€ç½å®³ç›£è¦–</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Sentinel-2 Cloudless</strong></td>
                                        <td>10m</td>
                                        <td>å¹´æ¬¡æ›´æ–°</td>
                                        <td>ç„¡æ–™ï¼ˆè¦å¸°å±ï¼‰</td>
                                        <td>ç’°å¢ƒç›£è¦–ã€è¾²æ¥­</td>
                                    </tr>
                                    <tr>
                                        <td><strong>åœ°ç†é™¢ãƒ™ã‚¯ã‚¿ãƒ¼</strong></td>
                                        <td>ãƒ™ã‚¯ã‚¿ãƒ¼</td>
                                        <td>å®šæœŸæ›´æ–°</td>
                                        <td>ç„¡æ–™</td>
                                        <td>æ—¥æœ¬ã®å…¬å¼åœ°å›³</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <div class="info-box">
                                <strong>ğŸ¯ ç”¨é€”åˆ¥ãŠã™ã™ã‚</strong><br>
                                <strong>Webã‚¢ãƒ—ãƒª:</strong> OSM Japan Style<br>
                                <strong>ä¸å‹•ç”£:</strong> èˆªç©ºå†™çœŸ + åœ°ç†é™¢åœ°å›³<br>
                                <strong>ç‰©æµ:</strong> OSM Standard<br>
                                <strong>é˜²ç½:</strong> åœ°ç†é™¢åœ°å›³ + è¡›æ˜Ÿå†™çœŸ<br>
                                <strong>è¦³å…‰:</strong> OSM + èˆªç©ºå†™çœŸ
                            </div>
                            
                            <div class="warning-box">
                                <strong>âš ï¸ å•†ç”¨åˆ©ç”¨æ™‚ã®æ³¨æ„</strong><br>
                                â€¢ OSM: å¸°å±è¡¨ç¤ºãŒå¿…è¦<br>
                                â€¢ èˆªç©ºå†™çœŸ: ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ç¢ºèªå¿…é ˆ<br>
                                â€¢ åœ°ç†é™¢åœ°å›³: åˆ©ç”¨è¦ç´„ã®ç¢ºèª<br>
                                â€¢ ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ãƒ»è²»ç”¨ã®ç¢ºèª
                            </div>
                        </div>
                    </div>
                    
                    <!-- ã‚¹ãƒ©ã‚¤ãƒ‰5: å®Ÿè£…ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ -->
                    <div class="carousel-slide">
                        <div class="basemap-section">
                            <h2>å®Ÿè£…ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h2>
                            
                            <div class="basemap-item">
                                <h3>è¤‡æ•°åœ°å›³ã®åˆ‡ã‚Šæ›¿ãˆ</h3>
                                <button onclick="showStyleSwitcher()">ã‚¹ã‚¿ã‚¤ãƒ«åˆ‡ã‚Šæ›¿ãˆUI</button>
                                <div class="code-example">// åœ°å›³ã‚¹ã‚¿ã‚¤ãƒ«åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
const basemaps = {
  'standard': 'https://tile.openstreetmap.jp/styles/osm-bright-ja/style.json',
  'satellite': {
    version: 8,
    sources: {
      satellite: {
        type: 'raster',
        tiles: ['https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}']
      }
    },
    layers: [{ id: 'satellite', type: 'raster', source: 'satellite' }]
  }
};

function changeBasemap(type) {
  map.setStyle(basemaps[type]);
}</div>
                            </div>
                            
                            <div class="basemap-item">
                                <h3>ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆæˆ</h3>
                                <button onclick="toggleHybridMode()" id="btn-hybrid">ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰è¡¨ç¤º</button>
                                <div class="code-example">// è¡›æ˜Ÿå†™çœŸ + é“è·¯ãƒ©ãƒ™ãƒ«ã®åˆæˆ
map.on('style.load', () => {
  // è¡›æ˜Ÿå†™çœŸã‚’ãƒ™ãƒ¼ã‚¹ã«
  map.addSource('satellite', { /* è¡›æ˜Ÿå†™çœŸã‚½ãƒ¼ã‚¹ */ });
  map.addLayer({ id: 'satellite', type: 'raster', source: 'satellite' });
  
  // é“è·¯ãƒ»ãƒ©ãƒ™ãƒ«ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ä¸Šã«é‡ã­ã‚‹
  map.addSource('labels', { /* ãƒ©ãƒ™ãƒ«ã‚½ãƒ¼ã‚¹ */ });
  map.addLayer({ 
    id: 'roads', 
    type: 'line', 
    source: 'labels',
    paint: { 'line-color': 'yellow' }
  });
});</div>
                            </div>
                            
                            <div class="basemap-item">
                                <h3>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–</h3>
                                <div class="code-example">// ã‚¿ã‚¤ãƒ«èª­ã¿è¾¼ã¿æœ€é©åŒ–
map.setMaxZoom(18);  // æœ€å¤§ã‚ºãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«åˆ¶é™
map.setMinZoom(5);   // æœ€å°ã‚ºãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«åˆ¶é™

// ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰è¨­å®š
map.on('idle', () => {
  // å‘¨è¾ºã‚¿ã‚¤ãƒ«ã‚’ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰
  map.getSource('basemap').reload();
});

// ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡åˆ¶é™
map.setMaxTileCacheSize(50); // MB</div>
                            </div>
                            
                            <div class="info-box">
                                <strong>ğŸ’¡ å®Ÿè£…ã®ã‚³ãƒ„</strong><br>
                                â€¢ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç”¨é€”ã«å¿œã˜ãŸåœ°å›³é¸æŠ<br>
                                â€¢ è¤‡æ•°åœ°å›³ã®åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½æä¾›<br>
                                â€¢ ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰è¡¨ç¤ºã§ã‚ˆã‚Šè©³ç´°ãªæƒ…å ±<br>
                                â€¢ é©åˆ‡ãªå¸°å±è¡¨ç¤ºã®å®Ÿè£…<br>
                                â€¢ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®è€ƒæ…®
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³çŸ¢å° -->
                <button class="nav-arrows nav-prev">â€¹</button>
                <button class="nav-arrows nav-next">â€º</button>
            </div>
            
            <div class="carousel-nav">
                <div class="nav-dot active" onclick="goToSlide(0)"></div>
                <div class="nav-dot" onclick="goToSlide(1)"></div>
                <div class="nav-dot" onclick="goToSlide(2)"></div>
                <div class="nav-dot" onclick="goToSlide(3)"></div>
                <div class="nav-dot" onclick="goToSlide(4)"></div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
    <script>
        // åœ°å›³ã®åˆæœŸåŒ–
        const map = new maplibregl.Map({
            container: 'map',
            style: 'https://tile.openstreetmap.jp/styles/osm-bright-ja/style.json',
            center: [139.7670, 35.6814],
            zoom: 12
        });

        // ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’è¿½åŠ 
        map.addControl(new maplibregl.NavigationControl(), 'top-right');
        map.addControl(new maplibregl.ScaleControl({ unit: 'metric' }), 'bottom-left');

        // ã‚«ãƒ«ãƒ¼ã‚»ãƒ«é–¢é€£
        let currentSlide = 0;
        const totalSlides = 5;
        let hybridMode = false;

        // åœ°å›³ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©ï¼ˆä¿®æ­£ç‰ˆï¼‰
        const basemaps = {
            'osm-japan': 'https://tile.openstreetmap.jp/styles/osm-bright-ja/style.json',
            'osm-standard': {
                version: 8,
                sources: {
                    osm: {
                        type: 'raster',
                        tiles: ['https://tile.openstreetmap.org/{z}/{x}/{y}.png'],
                        tileSize: 256,
                        attribution: '&copy; OpenStreetMap contributors'
                    }
                },
                layers: [{
                    id: 'osm',
                    type: 'raster',
                    source: 'osm'
                }]
            },
            'esri-satellite': {
                version: 8,
                sources: {
                    satellite: {
                        type: 'raster',
                        tiles: [
                            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}'
                        ],
                        tileSize: 256,
                        attribution: '&copy; Esri'
                    }
                },
                layers: [{
                    id: 'satellite',
                    type: 'raster',
                    source: 'satellite'
                }]
            },
            'sentinel': {
                version: 8,
                sources: {
                    sentinel: {
                        type: 'raster',
                        tiles: [
                            'https://tiles.maps.eox.at/wmts/1.0.0/s2cloudless-2021_3857/default/g/{z}/{y}/{x}.jpg'
                        ],
                        tileSize: 256,
                        maxzoom: 15,
                        attribution: 'Â© <a href="https://maps.eox.at/">EOX IT Services GmbH</a> | Contains modified Copernicus Sentinel data 2021'
                    }
                },
                layers: [{
                    id: 'sentinel',
                    type: 'raster',
                    source: 'sentinel',
                    minzoom: 0,
                    maxzoom: 22
                }]
            },
            'gsi-standard': {
                version: 8,
                sources: {
                    gsi: {
                        type: 'raster',
                        tiles: [
                            'https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png'
                        ],
                        tileSize: 256,
                        attribution: '&copy; å›½åœŸåœ°ç†é™¢'
                    }
                },
                layers: [{
                    id: 'gsi',
                    type: 'raster',
                    source: 'gsi'
                }]
            },
            'gsi-vector': 'https://gsi-cyberjapan.github.io/gsivectortile-mapbox-gl-js/std.json',
            'gsi-photo': {
                version: 8,
                sources: {
                    gsi_photo: {
                        type: 'raster',
                        tiles: [
                            'https://cyberjapandata.gsi.go.jp/xyz/seamlessphoto/{z}/{x}/{y}.jpg'
                        ],
                        tileSize: 256,
                        attribution: '&copy; å›½åœŸåœ°ç†é™¢'
                    }
                },
                layers: [{
                    id: 'gsi_photo',
                    type: 'raster',
                    source: 'gsi_photo'
                }]
            },
            'gsi-relief': {
                version: 8,
                sources: {
                    relief: {
                        type: 'raster',
                        tiles: [
                            'https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png'
                        ],
                        tileSize: 256,
                        attribution: '&copy; å›½åœŸåœ°ç†é™¢'
                    }
                },
                layers: [{
                    id: 'relief',
                    type: 'raster',
                    source: 'relief'
                }]
            }
        };

        // ã‚«ãƒ«ãƒ¼ã‚»ãƒ«é–¢æ•°
        function updateCarousel() {
            const carousel = document.getElementById('carousel');
            carousel.style.transform = `translateX(-${currentSlide * 100}%)`;
            
            document.querySelectorAll('.nav-dot').forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }

        function nextSlide() {
            currentSlide = (currentSlide + 1) % totalSlides;
            updateCarousel();
        }

        function prevSlide() {
            currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
            updateCarousel();
        }

        function goToSlide(index) {
            currentSlide = index;
            updateCarousel();
        }

        // èƒŒæ™¯åœ°å›³åˆ‡ã‚Šæ›¿ãˆ
        function changeBasemap(type) {
            // ç¾åœ¨ã®ä¸­å¿ƒåº§æ¨™ã¨ã‚ºãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«ã‚’ä¿å­˜
            const center = map.getCenter();
            const zoom = map.getZoom();
            const bearing = map.getBearing();
            const pitch = map.getPitch();
            
            // å…¨ã¦ã®ãƒœã‚¿ãƒ³ã‚’ã€Œåˆ‡ã‚Šæ›¿ãˆã€ã«æˆ»ã™
            document.querySelectorAll('button[id^="btn-"]').forEach(btn => {
                btn.classList.remove('active');
                if (btn.id !== 'btn-hybrid') {
                    btn.textContent = 'åˆ‡ã‚Šæ›¿ãˆ';
                }
            });
            
            // é¸æŠã•ã‚ŒãŸãƒœã‚¿ãƒ³ã‚’ã€Œé©ç”¨ä¸­ã€ã«å¤‰æ›´
            const activeBtn = document.getElementById(`btn-${type}`);
            if (activeBtn) {
                activeBtn.classList.add('active');
                activeBtn.textContent = 'é©ç”¨ä¸­';
            }
            
            // åœ°å›³ã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ›´
            map.setStyle(basemaps[type]);
            
            // ã‚¹ã‚¿ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ãŒå®Œäº†ã—ãŸã‚‰ã€ä¿å­˜ã—ãŸçŠ¶æ…‹ã‚’å¾©å…ƒ
            map.once('style.load', () => {
                map.setCenter(center);
                map.setZoom(zoom);
                map.setBearing(bearing);
                map.setPitch(pitch);
                
                // ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’å†è¿½åŠ ï¼ˆå¿…è¦ãªå ´åˆï¼‰
                if (!map.hasControl(map._controls[0])) {
                    map.addControl(new maplibregl.NavigationControl(), 'top-right');
                    map.addControl(new maplibregl.ScaleControl({ unit: 'metric' }), 'bottom-left');
                }
            });
            
            console.log(`èƒŒæ™¯åœ°å›³ã‚’ ${type} ã«å¤‰æ›´ã—ã¾ã—ãŸ`);
        }

        // ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
        function toggleHybridMode() {
            const btn = document.getElementById('btn-hybrid');
            
            if (!hybridMode) {
                // ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰ON: è¡›æ˜Ÿå†™çœŸ + é“è·¯ãƒ©ãƒ™ãƒ«
                map.setStyle({
                    version: 8,
                    sources: {
                        satellite: {
                            type: 'raster',
                            tiles: [
                                'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}'
                            ],
                            tileSize: 256
                        },
                        osm: {
                            type: 'raster',
                            tiles: ['https://tile.openstreetmap.org/{z}/{x}/{y}.png'],
                            tileSize: 256
                        }
                    },
                    layers: [
                        {
                            id: 'satellite',
                            type: 'raster',
                            source: 'satellite'
                        },
                        {
                            id: 'osm-overlay',
                            type: 'raster',
                            source: 'osm',
                            paint: {
                                'raster-opacity': 0.3
                            }
                        }
                    ]
                });
                btn.textContent = 'ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ OFF';
                btn.classList.add('active');
                hybridMode = true;
            } else {
                // ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰OFF
                changeBasemap('osm-japan');
                btn.textContent = 'ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰è¡¨ç¤º';
                btn.classList.remove('active');
                hybridMode = false;
            }
        }

        // ã‚¹ã‚¿ã‚¤ãƒ«åˆ‡ã‚Šæ›¿ãˆUIè¡¨ç¤º
        function showStyleSwitcher() {
            if (document.getElementById('style-switcher')) return;
            
            const switcher = document.createElement('div');
            switcher.id = 'style-switcher';
            switcher.style.cssText = `
                position: absolute;
                top: 10px;
                left: 10px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 4px 8px rgba(0,0,0,0.3);
                z-index: 1000;
                font-family: Arial, sans-serif;
            `;
            switcher.innerHTML = `
                <h4 style="margin: 0 0 10px 0;">åœ°å›³åˆ‡ã‚Šæ›¿ãˆ</h4>
                <button onclick="changeBasemap('osm-japan')" style="display: block; width: 100%; margin: 3px 0;">OSM Japan</button>
                <button onclick="changeBasemap('esri-satellite')" style="display: block; width: 100%; margin: 3px 0;">è¡›æ˜Ÿå†™çœŸ</button>
                <button onclick="changeBasemap('sentinel')" style="display: block; width: 100%; margin: 3px 0;">Sentinel-2</button>
                <button onclick="changeBasemap('gsi-vector')" style="display: block; width: 100%; margin: 3px 0;">åœ°ç†é™¢ãƒ™ã‚¯ã‚¿ãƒ¼</button>
                <button onclick="toggleHybridMode()" style="display: block; width: 100%; margin: 3px 0;">ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰</button>
                <button onclick="document.getElementById('style-switcher').remove()" style="display: block; width: 100%; margin: 10px 0 0 0; background: #dc3545;">é–‰ã˜ã‚‹</button>
            `;
            document.querySelector('.map-section').appendChild(switcher);
        }

        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³çŸ¢å°ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.addEventListener('DOMContentLoaded', function() {
            const prevBtn = document.querySelector('.nav-prev');
            const nextBtn = document.querySelector('.nav-next');
            
            if (prevBtn) {
                prevBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    prevSlide();
                });
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    nextSlide();
                });
            }
        });

        // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                prevSlide();
            } else if (e.key === 'ArrowRight') {
                nextSlide();
            }
        });

        // åœ°å›³èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã®å‡¦ç†
        map.on('load', () => {
            console.log('åœ°å›³ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
        });

        // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
        map.on('error', (e) => {
            console.error('Map error:', e);
        });
    </script>
</body>
</html>